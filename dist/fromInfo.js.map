{"version":3,"sources":["../src/fromInfo.js"],"names":["fromInfo","info","clientID","console","log","validateInfo","Error","link","url","axios","get","headers","Accept","withCredentials","res","data","format","protocol","STREAMING_PROTOCOLS","PROGRESSIVE","responseType","r"],"mappings":";;;;;;;;;;;;;AAAA;;AACA;;AACA;;AAEA,IAAMA,QAAQ;AAAA,2FAAG,iBAAOC,IAAP,EAAaC,QAAb;AAAA;AAAA;AAAA;AAAA;AAAA;AACfC,YAAAA,OAAO,CAACC,GAAR,CAAYH,IAAZ;;AADe,gBAEVI,YAFU;AAAA;AAAA;AAAA;;AAAA,kBAEU,IAAIC,KAAJ,CAAU,8BAAV,CAFV;;AAAA;AAITC,YAAAA,IAJS,aAICN,IAAI,CAACO,GAJN,wBAIuBN,QAJvB;AAAA;AAAA,mBAKGO,kBAAMC,GAAN,CAAUH,IAAV,EAAgB;AAChCI,cAAAA,OAAO,EAAE;AACP,8BAAc,2HADP;AAEPC,gBAAAA,MAAM,EAAE,KAFD;AAGP,mCAAmB;AAHZ,eADuB;AAMhCC,cAAAA,eAAe,EAAE;AANe,aAAhB,CALH;;AAAA;AAKTC,YAAAA,GALS;;AAAA,gBAaVA,GAAG,CAACC,IAAJ,CAASP,GAbC;AAAA;AAAA;AAAA;;AAAA,kBAaU,IAAIF,KAAJ,mFAAqFC,IAArF,EAbV;;AAAA;AAAA,kBAeXN,IAAI,CAACe,MAAL,CAAYC,QAAZ,KAAyBC,sBAAoBC,WAflC;AAAA;AAAA;AAAA;;AAAA;AAAA,mBAgBGV,kBAAMC,GAAN,CAAUI,GAAG,CAACC,IAAJ,CAASP,GAAnB,EAAwB;AACtCK,cAAAA,eAAe,EAAE,IADqB;AAEtCO,cAAAA,YAAY,EAAE;AAFwB,aAAxB,CAhBH;;AAAA;AAgBPC,YAAAA,CAhBO;AAAA,6CAoBNA,CAAC,CAACN,IApBI;;AAAA;AAAA,6CAuBR,4BAAWD,GAAG,CAACC,IAAJ,CAASP,GAApB,CAvBQ;;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA,GAAH;;AAAA,kBAARR,QAAQ;AAAA;AAAA;AAAA,GAAd;;AA0BA,IAAMK,YAAY,GAAG,SAAfA,YAAe,CAAAJ,IAAI,EAAI;AAC3B,MAAI,CAACA,IAAI,CAACO,GAAN,IAAa,CAACP,IAAI,CAACe,MAAvB,EAA+B,OAAO,KAAP;AAC/B,SAAO,IAAP;AACD,CAHD;;eAKehB,Q","sourcesContent":["import axios from 'axios'\nimport m3u8stream from 'm3u8stream'\nimport STREAMING_PROTOCOLS from './protocols'\n\nconst fromInfo = async (info, clientID) => {\n  console.log(info)\n  if (!validateInfo) throw new Error('Invalid info object provided')\n\n  const link = `${info.url}?client_id=${clientID}`\n  const res = await axios.get(link, {\n    headers: {\n      'User-Agent': 'Mozilla/5.0 (Macintosh; Intel Mac OS X 10_15_3) AppleWebKit/537.36 (KHTML, like Gecko) Chrome/81.0.4044.129 Safari/537.36',\n      Accept: '*/*',\n      'Accept-Encoding': 'gzip, deflate, br'\n    },\n    withCredentials: true\n  })\n  if (!res.data.url) throw new Error(`Invalid response from Soundcloud. Check if the URL provided is correct: ${link}`)\n\n  if (info.format.protocol === STREAMING_PROTOCOLS.PROGRESSIVE) {\n    const r = await axios.get(res.data.url, {\n      withCredentials: true,\n      responseType: 'stream'\n    })\n    return r.data\n  }\n\n  return m3u8stream(res.data.url)\n}\n\nconst validateInfo = info => {\n  if (!info.url || !info.format) return false\n  return true\n}\n\nexport default fromInfo\n"],"file":"fromInfo.js"}